(()=>{"use strict";var t,e;!function(t){t[t.Admin=0]="Admin",t[t.User=1]="User",t[t.Invited=2]="Invited"}(t||(t={})),function(t){t.Asc="1",t.Desc="2"}(e||(e={}));var n,r=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},o=function(){function t(){this.obj={key:"",order:e.Asc},this.cache=new Map,this.result=[],this.sortByPrice=this.sortByPrice.bind(this),this.sortByName=this.sortByName.bind(this),this.sortByStock=this.sortByStock.bind(this),this.sortById=this.sortById.bind(this),this.sortByCategory=this.sortByCategory.bind(this)}return t.prototype.getSorting=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n={name:this.sortByName,price:this.sortByPrice,stock:this.sortByStock,id:this.sortById,category:this.sortByCategory};for(var r in t){var o=t[r].key,i=t[r].order;n[o](i)}},t.prototype.setSorting=function(t){this.cache.has(t.key)&&(this.result=this.getItems(t.key))},t.prototype.getItems=function(t){return this.cache.get(t)},t.prototype.setCache=function(t,e){this.cache.set(t.key,e),this.result=r([],e,!0),console.log(r([],e,!0))},t.prototype.sortByName=function(t){var e={key:"name",order:t};this.setSorting(e);var n=this.sortByKey("name",t);this.setCache(e,n)},t.prototype.sortByPrice=function(t){var e={key:"price",order:t};this.setSorting(e);var n=this.sortByKey("price",t);this.setCache(e,n)},t.prototype.sortByStock=function(t){var e={key:"stock",order:t};this.setSorting(e);var n=this.sortByKey("stock",t);this.setCache(e,n)},t.prototype.sortById=function(t){var e={key:"id",order:t};this.setSorting(e);var n=this.sortByKey("id",t);this.setCache(e,n)},t.prototype.sortByCategory=function(t){var e={key:"category",order:t};this.setSorting(e);var n=this.sortByKey("category",t);this.setCache(e,n)},t.prototype.sortByKey=function(t,e){var n=this;return void 0===t&&(t=""),1==parseInt(e)?this.result.sort((function(e,r){return n.sortBy(e,r,t)})):this.result.sort((function(e,r){return n.sortBy(r,e,t)}))},t.prototype.sortBy=function(t,e,n){return t[n]>e[n]?1:t[n]<e[n]?-1:0},t}(),i=(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});const c=function(t){function e(){var e=t.call(this)||this;return e.products=[],e}return i(e,t),e.prototype.all=function(){return this.products},e.prototype.findById=function(t){return this.products.find((function(e){return e.id==t}))},e.prototype.add=function(t){this.products.push(t)},e}(o),a=function(){function t(){this.name="",this.price=0,this.description="",this.stock=0,this.id=0,this.image="",this.category=""}return t.prototype.setName=function(t){this.name=t},t.prototype.getName=function(){return this.name},t.prototype.setPrice=function(t){this.price=t},t.prototype.getPrice=function(){return this.price},t.prototype.setDescription=function(t){this.description=t},t.prototype.getDescription=function(){return this.description},t.prototype.setId=function(t){this.id=t},t.prototype.getId=function(){return this.id},t}(),u=function(){function t(){this.products=[]}return t.prototype.add=function(t){if(!(t instanceof a))throw Error("Parameter should be Product type");this.products.push(t)},t}(),s=function(){function t(){this.email="",this.age=0,this.password=""}return t.prototype.setEmail=function(t){this.email=t},t.prototype.getEmail=function(){return this.email},t.prototype.setAge=function(t){this.age=t},t.prototype.getAge=function(){return this.age},t.prototype.setPass=function(t){this.password=t},t.prototype.getPass=function(){return this.password},t.prototype.delete=function(t){},t}();var l=function(){function t(){this.user=new s,this.catalog=new c,this.cart=new u}return t.prototype.getCart=function(){return this.cart},t.prototype.getCatalog=function(){return this.catalog},t}();function d(t){return e=this,n=void 0,o=function(){return function(t,e){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(e){switch(e.label){case 0:return t.catalog.products=[],[4,fetch("http://localhost:3002/products").then((function(t){return t.ok?t.json():Promise.reject(t)})).then((function(e){e.forEach((function(e){var n=new a;n.id=e.id,n.name=e.name,n.price=e.price,n.description=e.description,n.stock=e.stock,n.image=e.image,n.category=e.category,t.catalog.add(n)}))}))];case 1:return e.sent(),[2]}}))},new((r=void 0)||(r=Promise))((function(t,i){function c(t){try{u(o.next(t))}catch(t){i(t)}}function a(t){try{u(o.throw(t))}catch(t){i(t)}}function u(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(c,a)}u((o=o.apply(e,n||[])).next())}));var e,n,r,o}function f(t,e){Array.from(t.getElementsByClassName("js-product-list")).forEach((function(t){t.innerHTML=function(t){return t.map((function(t){return function(t){return'\n        <div class="product">\n            <div class="level">'+t.name+"</div>\n            <h2>$"+t.price+'</h2>\n            <ul>\n                <li>Lorem ipsum.</li>\n                <li>Lorem ipsum, lorem ipsum.</li>\n                <li>Lorem ipsum.</li>\n                <li>Lorem ipsum.</li>\n            </ul>\n            <div class="buy-details-buttons">\n                <button class="btn js-details" data-product-id="'+t.id+'">\n                    Detalles\n                </button>\n                <button class="btn js-add-to-cart" data-product-id="'+t.id+'">\n                    Comprar\n                </button>\n            </div>\n        </div>\n    '}(t)})).join("")}(e)}))}var p=function(){return p=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},p.apply(this,arguments)};const h=function(){return p({},localStorage)},y=function(t,e){window.localStorage.setItem(t,JSON.stringify(e))};function m(t){t.preventDefault();var e=document.getElementById("email"),n=document.getElementById("psw"),r=document.getElementById("birthday"),o=new Date(r.value),i=Math.round((Date.now()-o.getTime())/31536e6),c=new s;c.setEmail(e.value),c.setPass(n.value),c.setAge(i),y(c.email.split("@")[0],c),console.log(h()),alert("Bienvenido, "+c),window.location.href="/product-list.html"}var v=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function c(t){try{u(r.next(t))}catch(t){i(t)}}function a(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,a)}u((r=r.apply(t,e||[])).next())}))},g=function(t,e){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};function b(t){var e=t.target.id;if("hamburguer-icon"==e){var n=document.querySelector(".content"),r="hidden",o="visible";n.classList.contains(r)?n.classList.replace(r,o):n.classList.replace(o,r)}if("login-button"==e){var i=document.querySelector(".login-modal"),c=document.querySelector(".login-container");r="hidden",o="visible",i.classList.contains(r)?i.classList.replace(r,o):i.classList.replace(o,r),c.classList.contains(r)?c.classList.replace(r,o):c.classList.replace(o,r)}}function w(t){var e=document.getElementById(t),n=e.style.border;switch(e.style.border="3px solid red",e.focus(),t){case"name":alert("Ingrese un nombre");break;case"email":alert("Ingrese un email");break;case"age":alert("Seleccione una edad")}setTimeout((function(){e.style.border=n}),3e3)}function k(t){t.preventDefault();var e=document.getElementById("name"),n=document.getElementById("email"),r=document.getElementById("age");return""==e.value||null==e?w("name"):""==n.value||null==n?w("email"):""==r.value||null==r?w("age"):(alert("Thank you for joining our newletter, "+e.value+"!"),void(window.location.href="/product-list.html"))}function S(t){if(document.querySelectorAll(".js-add-to-cart").forEach((function(e){e.addEventListener("click",(function(){var e=t.getCatalog().findById(this.dataset.productId);t.getCart().add(e),document.getElementById("js-cart").innerHTML=String(t.getCart().products.length)}))})),document.querySelectorAll(".js-details").forEach((function(t){t.addEventListener("click",(function(){var t=this.dataset.productId;window.location.href="/product-details.html?"+t}))})),document.querySelectorAll(".login-button").forEach((function(t){t.addEventListener("click",(function(){}))})),"/product-details.html"==window.location.pathname){var n=new URL(window.location.href).toString(),r=n.substring(n.length-1);!function(){var t,e,n,o;t=this,e=void 0,o=function(){return function(t,e){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(t){switch(t.label){case 0:return[4,fetch("http://localhost:3002/products/"+r).then((function(t){return t.json()}))];case 1:return[4,(n=t.sent(),void(document.getElementById("js-details").innerHTML='\n            <div class="details">   \n                <h1>'+n.name+"</h1>\n                <p>"+n.price+'</p>\n                <img class="product-detail-img" src="https://c8.alamy.com/compes/2d8kced/analisis-fundamental-analisis-de-la-inversion-en-acciones-mediante-la-busqueda-de-datos-de-la-empresa-2d8kced.jpg">\n                <ul>\n                    <li class="product-description">'+n.description+"</li>\n                    <li>Stock: "+(n.stock>0?"Available":"Out of stock")+"</li>\n                    <li>"+n.category+"</li>\n                </ul>\n            </div>\n            "))];case 2:return t.sent(),[4,(e=r,void fetch("https://61587a685167ba00174bbb19.mockapi.io/comments").then((function(t){return t.ok?t.json():Promise.reject(t)})).then((function(t){var n=t.filter((function(t){return t.productId==e}));!function(t,e){Array.from(t.querySelectorAll("#js-comment-section")).forEach((function(t){t.innerHTML=function(t){return t.map((function(t){return function(t){return"\n            <h2>"+t.email.slice(0,t.email.indexOf("@"))+"</h2>\n            <ul>\n                <li>"+t.body+"</li>\n            </ul>\n            "}(t)})).join("")}(e)}))}(document,n)})).catch((function(t){console.log(t);var e=t.StatusText||"An error occurred";document.getElementById("js-comment-section").innerHTML="Error "+t.status+": "+e})))];case 3:return t.sent(),[2]}var e,n}))},new((n=void 0)||(n=Promise))((function(r,i){function c(t){try{u(o.next(t))}catch(t){i(t)}}function a(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,a)}u((o=o.apply(t,e||[])).next())}))}()}if(document.getElementById("form")&&document.getElementById("form").addEventListener("submit",k),document.querySelector(".dropdown-menu")&&document.querySelector("#hamburguer-icon").addEventListener("click",b),document.querySelector(".login-modal")&&document.querySelector("#login-button").addEventListener("click",b),document.querySelector("#login")&&document.getElementById("login").addEventListener("submit",m),document.querySelector("#filter")){var o=document.getElementById("filter");o.addEventListener("input",(function(){return function(t,n){return r=this,o=void 0,a=function(){var r,o,i,a;return function(t,e){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(u){switch(u.label){case 0:switch(o=(r=t).options[r.selectedIndex].value,i=new c,a=n.getCatalog().all(),i.result=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}([],a,!0),o){case"az-asc":i.getSorting({key:"name",order:e.Asc});break;case"az-desc":i.getSorting({key:"name",order:e.Desc});break;case"price-asc":i.getSorting({key:"price",order:e.Asc});break;case"price-desc":i.getSorting({key:"price",order:e.Desc})}return[4,f(document,i.result)];case 1:return u.sent(),[2]}}))},new((i=void 0)||(i=Promise))((function(t,e){function n(t){try{u(a.next(t))}catch(t){e(t)}}function c(t){try{u(a.throw(t))}catch(t){e(t)}}function u(e){var r;e.done?t(e.value):(r=e.value,r instanceof i?r:new i((function(t){t(r)}))).then(n,c)}u((a=a.apply(r,o||[])).next())}));var r,o,i,a}(o,t)}))}if(document.querySelectorAll(".cat-link")&&document.querySelectorAll(".cat-link").forEach((function(e){e.addEventListener("click",(function(n){n.preventDefault(),function(t,e){v(this,void 0,void 0,(function(){function n(t){return v(this,void 0,void 0,(function(){return g(this,(function(n){switch(n.label){case 0:return i=o.filter((function(e){return e.category==t})),[4,f(document,[])];case 1:return n.sent(),[4,f(document,i)];case 2:return n.sent(),[4,(document.querySelectorAll(".js-add-to-cart").forEach((function(t){t.addEventListener("click",(function(){var t=e.getCatalog().findById(this.dataset.productId);e.getCart().add(t),document.getElementById("js-cart").innerHTML=String(e.getCart().products.length)}))})),void document.querySelectorAll(".js-details").forEach((function(t){t.addEventListener("click",(function(){var t=this.dataset.productId;window.location.href="/product-details.html?"+t}))})))];case 3:return n.sent(),e.catalog.products=i,[2]}}))}))}var r,o,i;return g(this,(function(c){switch(c.label){case 0:return r=t.id,[4,d(e)];case 1:return c.sent(),[4,e.getCatalog().all()];case 2:switch(o=c.sent(),i=[],r){case"all":f(document,o);break;case"book":n("Book");break;case"course":n("Course");break;case"software":n("Software")}return[4,(document.querySelectorAll(".js-add-to-cart").forEach((function(t){t.addEventListener("click",(function(){var t=e.getCatalog().findById(this.dataset.productId);e.getCart().add(t),document.getElementById("js-cart").innerHTML=String(e.getCart().products.length)}))})),void document.querySelectorAll(".js-details").forEach((function(t){t.addEventListener("click",(function(){var t=this.dataset.productId;window.location.href="/product-details.html?"+t}))})))];case 3:return c.sent(),[2]}}))}))}(e,t)}))})),document.querySelector("#search-input-bar")){var i=document.querySelector("#search-input-bar");addEventListener("keyup",(function(){return function(t,e){return n=this,r=void 0,i=function(){var n,r;return function(t,e){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(o){switch(o.label){case 0:return console.log("Searching "+t+"..."),n=e.getCatalog().all(),r=n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})),f(document,[]),f(document,r),[4,(document.querySelectorAll(".js-add-to-cart").forEach((function(t){t.addEventListener("click",(function(){var t=e.getCatalog().findById(this.dataset.productId);e.getCart().add(t),document.getElementById("js-cart").innerHTML=String(e.getCart().products.length)}))})),void document.querySelectorAll(".js-details").forEach((function(t){t.addEventListener("click",(function(){var t=this.dataset.productId;window.location.href="/product-details.html?"+t}))})))];case 1:return o.sent(),[2]}}))},new((o=void 0)||(o=Promise))((function(t,e){function c(t){try{u(i.next(t))}catch(t){e(t)}}function a(t){try{u(i.throw(t))}catch(t){e(t)}}function u(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o((function(t){t(n)}))).then(c,a)}u((i=i.apply(n,r||[])).next())}));var n,r,o,i}(i.value,t)}))}}var E=new l;y("store",E),function(){var t,e,n,r;t=this,e=void 0,r=function(){var t;return function(t,e){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(e){switch(e.label){case 0:return[4,d(E)];case 1:return e.sent(),t=E.getCatalog().all(),[4,f(document,t)];case 2:return e.sent(),[4,S(E)];case 3:return e.sent(),[2]}}))},new((n=void 0)||(n=Promise))((function(o,i){function c(t){try{u(r.next(t))}catch(t){i(t)}}function a(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,a)}u((r=r.apply(t,e||[])).next())}))}()})();