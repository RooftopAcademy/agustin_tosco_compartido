(()=>{"use strict";var t,e,n;!function(t){t[t.Course=0]="Course",t[t.Book=1]="Book",t[t.Software=2]="Software"}(t||(t={})),function(t){t[t.Admin=0]="Admin",t[t.User=1]="User",t[t.Invited=2]="Invited"}(e||(e={})),function(t){t.Asc="1",t.Desc="2"}(n||(n={}));var r,o=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},i=function(){function t(){this.obj={key:"",order:n.Asc},this.cache=new Map,this.result=[],this.sortByPrice=this.sortByPrice.bind(this),this.sortByName=this.sortByName.bind(this),this.sortByStock=this.sortByStock.bind(this),this.sortById=this.sortById.bind(this),this.sortByCategory=this.sortByCategory.bind(this)}return t.prototype.getSorting=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n={name:this.sortByName,price:this.sortByPrice,stock:this.sortByStock,id:this.sortById,category:this.sortByCategory};for(var r in t){var o=t[r].key,i=t[r].order;n[o](i)}},t.prototype.setSorting=function(t){this.cache.has(t.key)&&(this.result=this.getItems(t.key))},t.prototype.getItems=function(t){return this.cache.get(t)},t.prototype.setCache=function(t,e){this.cache.set(t.key,e),this.result=o([],e,!0),console.log(o([],e,!0))},t.prototype.sortByName=function(t){var e={key:"name",order:t};this.setSorting(e);var n=this.sortByKey("name",t);this.setCache(e,n)},t.prototype.sortByPrice=function(t){var e={key:"price",order:t};this.setSorting(e);var n=this.sortByKey("price",t);this.setCache(e,n)},t.prototype.sortByStock=function(t){var e={key:"stock",order:t};this.setSorting(e);var n=this.sortByKey("stock",t);this.setCache(e,n)},t.prototype.sortById=function(t){var e={key:"id",order:t};this.setSorting(e);var n=this.sortByKey("id",t);this.setCache(e,n)},t.prototype.sortByCategory=function(t){var e={key:"category",order:t};this.setSorting(e);var n=this.sortByKey("category",t);this.setCache(e,n)},t.prototype.sortByKey=function(t,e){var n=this;return void 0===t&&(t=""),1==parseInt(e)?this.result.sort((function(e,r){return n.sortBy(e,r,t)})):this.result.sort((function(e,r){return n.sortBy(r,e,t)}))},t.prototype.sortBy=function(t,e,n){return t[n]>e[n]?1:t[n]<e[n]?-1:0},t}(),c=(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const s=function(t){function e(){var e=t.call(this)||this;return e.products=[],e}return c(e,t),e.prototype.all=function(){return this.products},e.prototype.findById=function(t){return this.products.find((function(e){return e.id==t}))},e.prototype.add=function(t){this.products.push(t)},e}(i),a=function(){function t(){this.name="",this.price=0,this.description="",this.stock=0,this.id=0,this.image="",this.category=0}return t.prototype.setName=function(t){this.name=t},t.prototype.getName=function(){return this.name},t.prototype.setPrice=function(t){this.price=t},t.prototype.getPrice=function(){return this.price},t.prototype.setDescription=function(t){this.description=t},t.prototype.getDescription=function(){return this.description},t.prototype.setId=function(t){this.id=t},t.prototype.getId=function(){return this.id},t}(),u=function(){function t(){this.products=[]}return t.prototype.add=function(t){if(!(t instanceof a))throw Error("Parameter should be Product type");this.products.push(t)},t}(),l=function(){function t(){this.email="",this.age=0,this.password=""}return t.prototype.setEmail=function(t){this.email=t},t.prototype.getEmail=function(){return this.email},t.prototype.setAge=function(t){this.age=t},t.prototype.getAge=function(){return this.age},t.prototype.setPass=function(t){this.password=t},t.prototype.getPass=function(){return this.password},t.prototype.delete=function(t){},t}();var d=function(){function t(){this.user=new l,this.catalog=new s,this.cart=new u}return t.prototype.getCart=function(){return this.cart},t.prototype.getCatalog=function(){return this.catalog},t}();function p(t){return e=this,n=void 0,o=function(){return function(t,e){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(e){switch(e.label){case 0:return[4,fetch("http://localhost:3002/products").then((function(t){return t.ok?t.json():Promise.reject(t)})).then((function(e){e.forEach((function(e){var n=new a;n.id=e.id,n.name=e.name,n.price=e.price,n.description=e.description,n.stock=e.stock,n.image=e.image,n.category=e.category,t.catalog.add(n)})),console.log("Fetched from API")}))];case 1:return e.sent(),[2]}}))},new((r=void 0)||(r=Promise))((function(t,i){function c(t){try{a(o.next(t))}catch(t){i(t)}}function s(t){try{a(o.throw(t))}catch(t){i(t)}}function a(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(c,s)}a((o=o.apply(e,n||[])).next())}));var e,n,r,o}function f(t,e){Array.from(t.getElementsByClassName("js-product-list")).forEach((function(t){t.innerHTML=function(t){return t.map((function(t){return function(t){return'\n        <div class="product">\n            <div class="level">'+t.name+"</div>\n            <h2>$"+t.price+'</h2>\n            <ul>\n                <li>Lorem ipsum.</li>\n                <li>Lorem ipsum, lorem ipsum.</li>\n                <li>Lorem ipsum.</li>\n                <li>Lorem ipsum.</li>\n            </ul>\n            <div class="buy-details-buttons">\n                <button class="btn js-details" data-product-id="'+t.id+'">\n                    Detalles\n                </button>\n                <button class="btn js-add-to-cart" data-product-id="'+t.id+'">\n                    Comprar\n                </button>\n            </div>\n        </div>\n    '}(t)})).join("")}(e)}))}var h=function(){return h=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},h.apply(this,arguments)};const y=function(){return h({},localStorage)},m=function(t,e){window.localStorage.setItem(t,JSON.stringify(e))};function g(t){t.preventDefault();var e=document.getElementById("email"),n=document.getElementById("psw"),r=document.getElementById("birthday"),o=new Date(r.value),i=Math.round((Date.now()-o.getTime())/31536e6),c=new l;c.setEmail(e.value),c.setPass(n.value),c.setAge(i),m(c.email.split("@")[0],c),console.log(y()),window.location.href="/product-list.html"}function v(t){var e=t.target.id;if("hamburguer-icon"==e){var n=document.querySelector(".content"),r="hidden",o="visible";n.classList.contains(r)?n.classList.replace(r,o):n.classList.replace(o,r)}if("login-button"==e){var i=document.querySelector(".login-modal"),c=document.querySelector(".login-container");r="hidden",o="visible",i.classList.contains(r)?i.classList.replace(r,o):i.classList.replace(o,r),c.classList.contains(r)?c.classList.replace(r,o):c.classList.replace(o,r)}}function b(t){var e=document.getElementById(t),n=e.style.border;switch(e.style.border="3px solid red",e.focus(),t){case"name":alert("Ingrese un nombre");break;case"email":alert("Ingrese un email");break;case"age":alert("Seleccione una edad")}setTimeout((function(){e.style.border=n}),3e3)}function w(t){t.preventDefault();var e=document.getElementById("name"),n=document.getElementById("email"),r=document.getElementById("age");return""==e.value||null==e?b("name"):""==n.value||null==n?b("email"):""==r.value||null==r?b("age"):(alert("Bienvenido, "+e.value),void(window.location.href="/product-list.html"))}function k(t){document.getElementById("js-details").innerHTML='\n            <div class="details">   \n                <h1>'+t.name+"</h1>\n                <p>"+t.price+'</p>\n                <img class="product-detail-img" src="https://c8.alamy.com/compes/2d8kced/analisis-fundamental-analisis-de-la-inversion-en-acciones-mediante-la-busqueda-de-datos-de-la-empresa-2d8kced.jpg">\n                <ul>\n                    <li class="product-description">'+t.description+"</li>\n                    <li>Stock: "+(t.stock>0?"Available":"Out of stock")+"</li>\n                    <li>"+t.category+"</li>\n                </ul>\n            </div>\n            "}function B(t){if(document.querySelectorAll(".js-add-to-cart").forEach((function(e){e.addEventListener("click",(function(){var e=t.getCatalog().findById(this.dataset.productId);t.getCart().add(e),document.getElementById("js-cart").innerHTML=String(t.getCart().products.length)}))})),document.querySelectorAll(".js-details").forEach((function(t){t.addEventListener("click",(function(){var t=this.dataset.productId;window.location.href="/product-details.html?"+t}))})),document.querySelectorAll(".login-button").forEach((function(t){t.addEventListener("click",(function(){}))})),"/product-details.html"==window.location.pathname){var e=new URL(window.location.href).toString(),n=e.substring(e.length-1);!function(){var t,e,r,o;t=this,e=void 0,o=function(){var t;return function(t,e){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(e){switch(e.label){case 0:return[4,fetch("http://localhost:3002/products/"+n).then((function(t){return t.json()}))];case 1:return t=e.sent(),console.log(t),[4,k(t)];case 2:return e.sent(),[4,(r=n,void fetch("https://61587a685167ba00174bbb19.mockapi.io/comments").then((function(t){return t.ok?t.json():Promise.reject(t)})).then((function(t){var e=t.filter((function(t){return t.productId==r}));!function(t,e){Array.from(t.querySelectorAll("#js-comment-section")).forEach((function(t){t.innerHTML=function(t){return t.map((function(t){return function(t){return"\n            <h2>"+t.email.slice(0,t.email.indexOf("@"))+"</h2>\n            <ul>\n                <li>"+t.body+"</li>\n            </ul>\n            "}(t)})).join("")}(e)}))}(document,e)})).catch((function(t){console.log(t);var e=t.StatusText||"An error occurred";document.getElementById("js-comment-section").innerHTML="Error "+t.status+": "+e})))];case 3:return e.sent(),[2]}var r}))},new((r=void 0)||(r=Promise))((function(n,i){function c(t){try{a(o.next(t))}catch(t){i(t)}}function s(t){try{a(o.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(c,s)}a((o=o.apply(t,e||[])).next())}))}()}document.getElementById("form")&&document.getElementById("form").addEventListener("submit",w),document.querySelector(".dropdown-menu")&&document.querySelector("#hamburguer-icon").addEventListener("click",v),document.querySelector(".login-modal")&&document.querySelector("#login-button").addEventListener("click",v),document.querySelector("#login")&&document.getElementById("login").addEventListener("submit",g)}var S=new d;m("store",S),function(){var t,e,r,o;t=this,e=void 0,o=function(){var t,e,r,o;return function(t,e){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(i){switch(i.label){case 0:return[4,p(S)];case 1:return i.sent(),t=S.getCatalog().all(),[4,f(document,t)];case 2:return i.sent(),[4,B(S)];case 3:return i.sent(),(e=new s).result=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}([],t,!0),e.getSorting({key:"price",order:n.Desc}),r={name:"AmiBroker",price:223,description:"",stock:5,id:8,image:"",category:3},(o=new a).id=r.id,o.name=r.name,o.price=r.price,o.description=r.description,o.stock=r.stock,o.image=r.image,o.category=r.category,[2]}}))},new((r=void 0)||(r=Promise))((function(n,i){function c(t){try{a(o.next(t))}catch(t){i(t)}}function s(t){try{a(o.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(c,s)}a((o=o.apply(t,e||[])).next())}))}()})();